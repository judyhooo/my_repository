# Work Notes 2023.6.16

* 圆形门在desert和snow两种场景下余弦相似度对比（10000张&1000张）
  * 数据集展示：

![image-20230606165420062](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230606165420062.png)

![image-20230616113906107](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230616113906107.png)

| 余弦相似度分布   | MMD                 | KL(原始 : 潜空间z)    | KL(潜空间z : 原始)    |
| ---------------- | ------------------- | --------------------- | --------------------- |
| desert&snow  10k | 0.13464112649447224 | 0.0055659910330138306 | 0.0017192901983399795 |
| desert&snow  1k  | 0.36158439025140077 | 0.2960609301319354    | 0.8957442407364745    |

| 区间分布      | [-1,-0.75] | [-0.75,-0.5] | [-0.5,0.25] | [-0.25,0] | [0,0.25] | [0.25,0.5] | [0.5,0.75] | [0.75,1] |
| ------------- | ---------- | ------------ | ----------- | --------- | -------- | ---------- | ---------- | -------- |
| 10k（原始）   | 0          | 0            | 6           | 131       | 707      | 2705       | 6258       | 193      |
| 10k（潜空间） | 0          | 33           | 245         | 1300      | 3673     | 3835       | 887        | 27       |
| 1k（原始）    | 0          | 0            | 8           | 18        | 4        | 1          | 45         | 924      |
| 1k（潜空间）  | 0          | 0            | 1           | 24        | 171      | 413        | 321        | 70       |

**数据分析**：可以发现经过潜空间变换后潜空间z的余弦相似度在其它区间中的分布占比变大，整个分布被拉长了，因为VAE编码会尽可能满足更多的值，这是从整体角度去看，从个体角度去看，考察余弦相似度较高的值转换后如何，余弦相似度较低的转换如何。

![image-20230616155552795](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230616155552795.png)

整体可以看出余弦相似度较大的经过潜空间后会稍微变小一点。

* 方形gate与圆形gate在1000张数量下不同场景余弦相似度分布的比较。
  * 数据集对比：

![image-20230606154338820](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230606154338820.png)

![image-20230606165420062](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230606165420062.png)

![image-20230616174902353](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230616174902353.png)

| 余弦相似度分布          | MMD                 | KL(原始 : 潜空间z) | KL(潜空间z : 原始) |
| ----------------------- | ------------------- | ------------------ | ------------------ |
| square desert&snow 1k   | 0.369797808553067   | 0.2659921565972234 | 1.3914178724200195 |
| circular desert&snow 1k | 0.36158439025140077 | 0.2960609301319354 | 0.8957442407364745 |

| 区间分布     | [-1,-0.75] | [-0.75,-0.5] | [-0.5,0.25] | [-0.25,0] | [0,0.25] | [0.25,0.5] | [0.5,0.75] | [0.75,1] |
| ------------ | ---------- | ------------ | ----------- | --------- | -------- | ---------- | ---------- | -------- |
| 1k（方形）   | 0          | 0            | 0           | 1         | 2        | 1          | 6258       | 193      |
| 1k（潜空间） | 0          | 0            | 8           | 18        | 4        | 1          | 45         | 924      |
| 1k（圆形）   | 0          | 0            | 0           | 0         | 7        | 160        | 695        | 138      |
| 1k（潜空间） | 0          | 0            | 1           | 24        | 171      | 413        | 321        | 70       |

![image-20230619094320173](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230619094320173.png)

**数据分析：**可以明显发现各点数据被分散了。

* 同一场景，不同门
  * 数据集展示：

![image-20230606151750963](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230606151750963.png)

![image-20230619104929535](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230619104929535.png)

| 余弦相似度分布      | MMD                 | KL(原始 : 潜空间z)   | KL(潜空间z : 原始)    |
| ------------------- | ------------------- | -------------------- | --------------------- |
| circular&square 10k | 0.1644387766931538  | 0.002285432065972945 | 0.0013034496282446095 |
| circular&square 1k  | 0.06602018466158192 | 0.003894331337558307 | 0.013897193095244769  |

| 间分布        | [-1,-0.75] | [-0.75,-0.5] | [-0.5,0.25] | [-0.25,0] | [0,0.25] | [0.25,0.5] | [0.5,0.75] | [0.75,1] |
| ------------- | ---------- | ------------ | ----------- | --------- | -------- | ---------- | ---------- | -------- |
| 10k（原始）   | 0          | 0            | 0           | 39        | 594      | 2619       | 4316       | 432      |
| 10k（潜空间） | 0          | 1            | 26          | 125       | 656      | 1817       | 3398       | 1977     |
| 1k（原始）    | 0          | 0            | 0           | 1         | 9        | 27         | 103        | 860      |
| 1k（潜空间）  | 0          | 0            | 0           | 4         | 19       | 38         | 125        | 814      |

**数据分析：**可以发现在经过潜空间变换后，区间被拉长了，且高值部分占比变大。

![image-20230619110052877](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20230619110052877.png)

1. 查版本
2. 改RPC接口
3. Ubuntu
4. KL比较

